<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=keywords content="后端"><meta name=description content="后端"><meta name=referrer content="no-referrer"><title>后端</title><link rel="shortcut icon" href=https://zhujianghan.github.io/zjh-blog/favicon.ico type=image/x-icon><link rel=stylesheet href=https://zhujianghan.github.io/zjh-blog/css/index.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3><link rel=preconnect href=https://QB1NYV0GE1-dsn.algolia.net crossorigin><script src=https://zhujianghan.github.io/zjh-blog/js/theme.js></script>
<script defer src=https://unpkg.com/alpinejs@3.10.2/dist/cdn.min.js></script></head><body class="antialiased text-slate-900 dark:text-slate-400 bg-white dark:bg-slate-900"><div><div class="sticky top-0 z-40 w-full backdrop-blur flex-none transition-colors duration-500 lg:z-50 lg:border-b lg:border-slate-900/10 dark:border-slate-50/[0.06] bg-white dark:bg-slate-900" x-data="{
    hideNavs: true,

    hideMenuChildren: true,

    openThemesList: false,
    theme: localStorage.theme === 'dark' ? 'dark' : 'light',
    toggleTheme(t = 'light') {
      window.setTheme(t)
      this.theme = t
      this.openThemesList = false
    },

    openLanguagesList: false,
    toggleLanguage(t) {
      window.location.href = t
    },

    openSearch() {
      document.querySelector('#docsearch button').click()
    },
  }"><div class="container mx-auto px-2"><div class="py-4 border-b border-slate-900/10 dark:border-slate-300/10"><div class="relative flex items-center"><a class="mr-10 flex-none" href=/zjh-blog><div class="flex justify-between items-center"><span>🍀</span>
<span class="text-slate-900 dark:text-white">FourLeaf</span></div></a><div class="flex-auto relative hidden lg:flex justify-between items-center"><nav class="leading-6 font-bold text-slate-700 dark:text-slate-200"><ul class="flex space-x-8"><li><a class="hover:text-emerald-600 dark:hover:text-emerald-400" href=/zjh-blog/posts/frontend>前端</a></li><li><a class="hover:text-emerald-600 dark:hover:text-emerald-400" href=/zjh-blog/posts/backend>后端</a></li><li><a class="hover:text-emerald-600 dark:hover:text-emerald-400" href=/zjh-blog/posts/server>服务器</a></li><li><a class="hover:text-emerald-600 dark:hover:text-emerald-400" href=/zjh-blog/posts/interview>面试题</a></li><li><a class="hover:text-emerald-600 dark:hover:text-emerald-400" href=/zjh-blog/posts/other>其它</a></li><li><div class=relative @mouseover="hideMenuChildren = false" @mouseout="hideMenuChildren = true"><div class=cursor-pointer>projects</div><ul class="list-disc list-inside absolute w-64 bg-white" x-show=!hideMenuChildren><li class=py-1.5><a class="font-normal underline hover:text-emerald-600 dark:hover:text-emerald-400" href=https://zhujianghan.github.io/music-colorful-blocks>music-colorful-blocks</a></li><li class=py-1.5><a class="font-normal underline hover:text-emerald-600 dark:hover:text-emerald-400" href=https://zhujianghan.github.io/custom-excalidraw>custom-excalidraw</a></li><li class=py-1.5><a class="font-normal underline hover:text-emerald-600 dark:hover:text-emerald-400" href=https://zhujianghan.github.io/image-merger>image-merger</a></li></ul></div></li></ul></nav><div class="flex items-center space-x-5 border-slate-200 dark:border-slate-800"><div id=docsearch></div><div class=flex><button @click="openLanguagesList = true">
<span class="text-slate-700 dark:text-slate-200"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022.0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"/></svg></span></button><ul class="absolute z-50 top-full right-0 bg-white rounded-lg ring-1 ring-slate-900/10 shadow-lg overflow-hidden w-36 py-1 text-sm text-slate-700 font-bold dark:bg-slate-800 dark:ring-0 dark:highlight-white/5 dark:text-slate-300 mt-8" x-show=openLanguagesList @click.outside="openLanguagesList = false"><li class='py-1 px-2 flex items-center cursor-pointer text-emerald-600 dark:text-emerald-400'><a href=https://zhujianghan.github.io/zjh-blog/ class="w-full font-bold uppercase">zh</a></li><li class='py-1 px-2 flex items-center cursor-pointer'><a href=https://zhujianghan.github.io/zjh-blog/en/ class="w-full font-bold uppercase">en</a></li></ul></div><div class=flex><button @click="openThemesList = true">
<span class="dark:hidden text-emerald-600"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364-.707-.707M6.343 6.343l-.707-.707m12.728.0-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></svg></span><span class="hidden dark:inline text-emerald-400"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003.0 0012 21a9.003 9.003.0 008.354-5.646z"/></svg></span></button><ul class="absolute z-50 top-full right-0 bg-white rounded-lg ring-1 ring-slate-900/10 shadow-lg overflow-hidden w-36 py-1 text-sm text-slate-700 font-bold dark:bg-slate-800 dark:ring-0 dark:highlight-white/5 dark:text-slate-300 mt-8" x-show=openThemesList @click.outside="openThemesList = false"><li class="py-1 px-2 flex items-center cursor-pointer" :class="{ 'text-emerald-600': theme === 'light'}" @click="toggleTheme('light')"><span class=mr-2><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364-.707-.707M6.343 6.343l-.707-.707m12.728.0-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></svg></span>Light</li><li class="py-1 px-2 flex items-center cursor-pointer" :class="{ 'text-emerald-600': theme === 'dark'}" @click="toggleTheme('dark')"><span class=mr-2><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003.0 0012 21a9.003 9.003.0 008.354-5.646z"/></svg></span>Dark</li></ul></div><div><a href=# class="block text-slate-400 hover:text-slate-500 dark:hover:text-slate-300"><svg viewBox="0 0 16 16" class="w-5 h-5" fill="currentcolor" aria-hidden="true"><path d="M8 0C3.58.0.0 3.58.0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38.0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95.0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12.0.0.67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15.0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48.0 1.07-.01 1.93-.01 2.2.0.21.15.46.55.38A8.013 8.013.0 0016 8c0-4.42-3.58-8-8-8z"/></svg></a></div></div></div><button class="ml-auto text-slate-500 w-8 h-8 -my-1 flex items-center justify-center hover:text-slate-600 lg:hidden dark:text-slate-400 dark:hover:text-slate-300" @click=openSearch><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5A7 7 0 113 10a7 7 0 0114 0z"/></svg></button><div class="ml-2 -my-1 lg:hidden"><button class="text-slate-500 w-8 h-8 flex items-center justify-center hover:text-slate-600 dark:text-slate-400 dark:hover:text-slate-300" @click="hideNavs = false"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"/></svg></button></div></div></div></div><div class=lg:hidden x-show=!hideNavs @click.outside="hideNavs = true"><div class="fixed top-4 right-4 w-full max-w-xs bg-white rounded-lg shadow-lg p-6 text-base font-bold text-slate-900 dark:bg-slate-800 dark:text-slate-400 dark:highlight-white/5"><button class="absolute top-5 right-5 w-8 h-8 flex items-center justify-center text-slate-500 hover:text-slate-600 dark:text-slate-400 dark:hover:text-slate-300" @click="hideNavs = true"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/></svg></button><ul class=space-y-6><li><a class="hover:text-emerald-600 dark:hover:text-emerald-400" href=/zjh-blog/posts/frontend>前端</a></li><li><a class="hover:text-emerald-600 dark:hover:text-emerald-400" href=/zjh-blog/posts/backend>后端</a></li><li><a class="hover:text-emerald-600 dark:hover:text-emerald-400" href=/zjh-blog/posts/server>服务器</a></li><li><a class="hover:text-emerald-600 dark:hover:text-emerald-400" href=/zjh-blog/posts/interview>面试题</a></li><li><a class="hover:text-emerald-600 dark:hover:text-emerald-400" href=/zjh-blog/posts/other>其它</a></li><li><a class="hover:text-emerald-600 dark:hover:text-emerald-400" href=/zjh-blog/>projects</a></li><li><a class="hover:text-emerald-600 dark:hover:text-emerald-400" href=https://github.com/zhujianghan>Github</a></li></ul><div class="mt-3 pt-3 border-t border-slate-200 dark:border-slate-200/10"><div class="flex items-center justify-between"><div class="text-slate-700 font-normal dark:text-slate-400">Switch language</div><div class="relative flex items-center ring-1 ring-slate-900/10 rounded-lg shadow-sm p-2 text-slate-700 font-semibold dark:bg-slate-600 dark:ring-0 dark:highlight-white/5 dark:text-slate-200"><span class="w-6 h-6 mr-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022.0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"/></svg></span><span class="w-10 text-slate-700 dark:text-slate-200 uppercase">zh</span>
<span><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414.0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414.0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"/></svg></span><label><select name=lang class="absolute appearance-none inset-0 w-full h-full opacity-0 dark:text-slate-500" @change.debounce=toggleLanguage($event.target.value)><option value=none selected disabled hidden>default</option><option value=https://zhujianghan.github.io/zjh-blog/>ZH</option><option value=https://zhujianghan.github.io/zjh-blog/en/>EN</option></select></label></div></div></div><div class="mt-3 pt-3 border-t border-slate-200 dark:border-slate-200/10"><div class="flex items-center justify-between"><div class="text-slate-700 font-normal dark:text-slate-400">Switch theme</div><div class="relative flex items-center ring-1 ring-slate-900/10 rounded-lg shadow-sm p-2 text-slate-700 font-semibold dark:bg-slate-600 dark:ring-0 dark:highlight-white/5 dark:text-slate-200"><span class="w-6 h-6 mr-2 dark:hidden"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364-.707-.707M6.343 6.343l-.707-.707m12.728.0-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></svg></span><span class="w-10 dark:hidden">Light</span>
<span class="w-6 h-6 mr-2 hidden dark:block"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364-.707-.707M6.343 6.343l-.707-.707m12.728.0-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></svg></span><span class="w-10 hidden dark:block">Dark</span>
<span><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414.0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414.0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"/></svg></span><label><select name=theme class="absolute appearance-none inset-0 w-full h-full opacity-0 dark:text-slate-500" @change.debounce=toggleTheme($event.target.value)><option value=none selected disabled hidden>default</option><option value=light>Light</option><option value=dark>Dark</option></select></label></div></div></div></div></div></div><main><div class="container mx-auto xl:max-w-screen-xl mt-8 px-2 flex justify-between space-x-5"><div class="w-full md:w-3/4"><ul class=space-y-10><li class=space-y-2><h3><a href=https://zhujianghan.github.io/zjh-blog/posts/backend/go-file-server/ class="text-lg font-bold">Go File Server</a></h3><div class="text-sm flex items-center space-x-5"><span class="flex items-center space-x-1"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5A2 2 0 003 7v12a2 2 0 002 2z"/></svg><time>2023-10-10</time></span><ul class="flex items-center space-x-2"><li class="px-1 py-0.5 rounded text-white bg-emerald-500"><a href=https://zhujianghan.github.io/zjh-blog/tags/go>go</a></li><li class="px-1 py-0.5 rounded text-white bg-emerald-500"><a href=https://zhujianghan.github.io/zjh-blog/tags/http>http</a></li></ul></div><div class="line-clamp-3 md:line-clamp-2 text-sm">使用 go 内置 http 快速开启文件服务器 func main() { // 方式1 // http.ListenAndServe(":8080", http.FileServer(http.Dir("./public"))) // 方式2: 可自动生成对应文件列表页面 fs := http.FileServer(http.Dir("public")) // http.Handle("/public/", http.StripPrefix("/public/", fs)) // http.Handle("/", http.StripPrefix("/public/", fs)) http.Handle("/", fs) http.ListenAndServe(":8080", nil) }</div></li><li class=space-y-2><h3><a href=https://zhujianghan.github.io/zjh-blog/posts/backend/sql-count-with-condition/ class="text-lg font-bold">Sql Count With Condition</a></h3><div class="text-sm flex items-center space-x-5"><span class="flex items-center space-x-1"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5A2 2 0 003 7v12a2 2 0 002 2z"/></svg><time>2023-06-14</time></span><ul class="flex items-center space-x-2"><li class="px-1 py-0.5 rounded text-white bg-emerald-500"><a href=https://zhujianghan.github.io/zjh-blog/tags/mysql>mysql</a></li></ul></div><div class="line-clamp-3 md:line-clamp-2 text-sm">多表 left join 后, 使用 count 查询需要使用 distinct, 如果 count 里需要再次添加条件, 使用 distinct if(&mldr;)
# 不做聚合查询 select company.id as company_id, company.name as company_name, vacancy.id as vacancy_id, vacancy.name as vacancy_name, shop.id as shop_id, shop.shop_name as shop_name, course.id as course_id, course.title as course_name from tb_company company left join tb_position vacancy on vacancy.company_id = company.id left join tb_shop shop on shop.company_id = company.id left join tb_shop_curriculum course on course.shop_id = shop.id where (vacancy.</div></li><li class=space-y-2><h3><a href=https://zhujianghan.github.io/zjh-blog/posts/backend/buffer-string-%E5%92%8C-buffer-string/ class="text-lg font-bold">Buffer-String()-和-Buffer-String()</a></h3><div class="text-sm flex items-center space-x-5"><span class="flex items-center space-x-1"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5A2 2 0 003 7v12a2 2 0 002 2z"/></svg><time>2022-06-16</time></span><ul class="flex items-center space-x-2"><li class="px-1 py-0.5 rounded text-white bg-emerald-500"><a href=https://zhujianghan.github.io/zjh-blog/tags/go>go</a></li></ul></div><div class="line-clamp-3 md:line-clamp-2 text-sm">b1 := bytes.Buffer{} // 非指针 b2 := bytes.NewBuffer([]byte{}) // 指针 b3 := &bytes.Buffer{} // 指针, 等同于 b2 b1.WriteString("abc") b2.WriteString("abc") fmt.Println(b1) // {[97 98 99] 0 0} fmt.Println(b1.String()) // abc fmt.Println(b2) // abc 原因: *Buffer 有方法 String(), Buffer 没有 String() 方法.
fmt.Println(b1), 就是 fmt 将 b1 按普通结构体进行输出: 分别输出各项 fmt.Println(b1.String()), 调用了 *Buffer 的 String() 方法 fmt.Println(b2), 自动调用 *Buffer 的 String() 方法 参考自 stackoverflow</div></li><li class=space-y-2><h3><a href=https://zhujianghan.github.io/zjh-blog/posts/backend/gin-middleware-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/ class="text-lg font-bold">gin-middleware-注意事项</a></h3><div class="text-sm flex items-center space-x-5"><span class="flex items-center space-x-1"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5A2 2 0 003 7v12a2 2 0 002 2z"/></svg><time>2022-06-07</time></span><ul class="flex items-center space-x-2"><li class="px-1 py-0.5 rounded text-white bg-emerald-500"><a href=https://zhujianghan.github.io/zjh-blog/tags/go>go</a></li><li class="px-1 py-0.5 rounded text-white bg-emerald-500"><a href=https://zhujianghan.github.io/zjh-blog/tags/gin>gin</a></li></ul></div><div class="line-clamp-3 md:line-clamp-2 text-sm">1. gin middleware 如果要中止后面中间件及所有程序的执行, 需要使用 c.Abort() + return 其中 Abort 会中止其后的中间件及页面处理程序, 而不会中止当前中间件函数内的余下程序, 使用 return 来中止当前中间件内后部的程序 func RejectMethodsExceptGet() gin.HandlerFunc { rejectMethods := map[string]struct{}{ "POST": {}, "DELETE": {}, "PUT": {}, "PATCH": {}, } return func(c *gin.Context) { if _, exist := rejectMethods[c.Request.Method]; exist { c.AbortWithStatusJSON(403, gin.H{ "err_msg": "invalid method", }) return } c.Next() } } 2. 中间件 Use 需要写在路由注册之前, 否则将不对之前注册的路由起作用 r := gin.New() r.Use(RejectMethodsExceptGet()) r.GET("/test", func(c *gin.Context) { example := c.MustGet("example").(string) // it would print: "12345" log.</div></li><li class=space-y-2><h3><a href=https://zhujianghan.github.io/zjh-blog/posts/backend/go-routine-%E4%BD%BF%E7%94%A8%E5%A4%96%E9%83%A8%E5%8F%98%E9%87%8F%E9%97%AE%E9%A2%98/ class="text-lg font-bold">go-routine-使用外部变量问题</a></h3><div class="text-sm flex items-center space-x-5"><span class="flex items-center space-x-1"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5A2 2 0 003 7v12a2 2 0 002 2z"/></svg><time>2022-04-26</time></span><ul class="flex items-center space-x-2"><li class="px-1 py-0.5 rounded text-white bg-emerald-500"><a href=https://zhujianghan.github.io/zjh-blog/tags/go>go</a></li></ul></div><div class="line-clamp-3 md:line-clamp-2 text-sm">for i := 0; i &lt; 10; i++ { go func() { fmt.Println(i) } } time.Sleep(time.Second) // 10,10,10,10,... 使用 go vet 检查
// 修改 for i := 0; i &lt; 10; i++ { go func() { i2 := i fmt.Println(i2) } } // 或者(推荐) for i := 0; i &lt; 10; i++ { go func(i int) { fmt.Println(i) }(i) } time.Sleep(time.Second) 参考 https://www.jianshu.com/p/e5f328819d4b</div></li><li class=space-y-2><h3><a href=https://zhujianghan.github.io/zjh-blog/posts/backend/go-%E9%80%9A%E7%94%A8-http-client-%E8%AF%B7%E6%B1%82%E5%A4%B4/ class="text-lg font-bold">go-通用-http-client-请求头</a></h3><div class="text-sm flex items-center space-x-5"><span class="flex items-center space-x-1"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5A2 2 0 003 7v12a2 2 0 002 2z"/></svg><time>2022-04-16</time></span><ul class="flex items-center space-x-2"><li class="px-1 py-0.5 rounded text-white bg-emerald-500"><a href=https://zhujianghan.github.io/zjh-blog/tags/go>go</a></li></ul></div><div class="line-clamp-3 md:line-clamp-2 text-sm">参考stackoverflow: adding-a-default-http-header-in-go
package main import ( "fmt" "net/http" "time" ) const accessToken = "MY_DEMO_TOKEN" type MyRoundTripper struct { r http.RoundTripper } func (mrt MyRoundTripper) RoundTrip(r *http.Request) (*http.Response, error) { r.Header.Add("Authorization", "Bearer: "+accessToken) return mrt.r.RoundTrip(r) } func main() { client := &http.Client{ Timeout: time.Second * 10, Transport: MyRoundTripper{r: http.DefaultTransport}, } fmt.Println(client.Get("http://google.com/")) }</div></li><li class=space-y-2><h3><a href=https://zhujianghan.github.io/zjh-blog/posts/backend/git-%E5%88%9B%E5%BB%BA%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF---%E4%BB%8E%E8%BF%9C%E7%A8%8B%E5%88%86%E6%94%AF%E6%8B%89%E5%8F%96%E6%9C%AC%E5%9C%B0%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E5%88%86%E6%94%AF/ class="text-lg font-bold">git-创建远程分支---从远程分支拉取本地不存在的分支</a></h3><div class="text-sm flex items-center space-x-5"><span class="flex items-center space-x-1"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5A2 2 0 003 7v12a2 2 0 002 2z"/></svg><time>2022-04-16</time></span></div><div class="line-clamp-3 md:line-clamp-2 text-sm">原文
新建远程分支 git push origin remote_branch_name:local_branch_name // remote_branch_name 是远程分支的名字 // local_branch_name 是本地分支的名字 git branch -a // 查看所有分支(远程+本地) 删除远程分支 git push origin :remote_branch_name // 或 git push origin --delete remote_branch_name 原文
git fetch git checkout -b local_branch_name origin/remote_branch_name</div></li><li class=space-y-2><h3><a href=https://zhujianghan.github.io/zjh-blog/posts/backend/foreach-%E4%B8%AD%E4%BD%BF%E7%94%A8-%E5%9C%B0%E5%9D%80%E7%AC%A6%E6%97%B6-%E6%9C%80%E5%90%8E%E8%A6%81%E9%87%8A%E6%94%BE-value/ class="text-lg font-bold">foreach-中使用-&地址符时,-最后要释放-value</a></h3><div class="text-sm flex items-center space-x-5"><span class="flex items-center space-x-1"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5A2 2 0 003 7v12a2 2 0 002 2z"/></svg><time>2022-04-16</time></span><ul class="flex items-center space-x-2"><li class="px-1 py-0.5 rounded text-white bg-emerald-500"><a href=https://zhujianghan.github.io/zjh-blog/tags/php>php</a></li></ul></div><div class="line-clamp-3 md:line-clamp-2 text-sm">$arr = [1,2,3]; foreach($arr as $key=> &$value){ if ($key){ $value = $value +1; } } unset($value); // 要注意翻译 $value, 否则后面如果还要用到 $value 时, 会指向 $arr 的最后一个元素</div></li><li class=space-y-2><h3><a href=https://zhujianghan.github.io/zjh-blog/posts/backend/dingo-api-%E8%BF%94%E5%9B%9E-response--array--setstatuscode/ class="text-lg font-bold">dingo-api-返回-response--array()--setStatusCode()</a></h3><div class="text-sm flex items-center space-x-5"><span class="flex items-center space-x-1"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5A2 2 0 003 7v12a2 2 0 002 2z"/></svg><time>2022-04-16</time></span></div><div class="line-clamp-3 md:line-clamp-2 text-sm">phpstorm 对 $this->response->item(***)->setStatusCode(***) 中的 item() 和 setStatusCode() 都有提示,
找了下 Dingo\Api\Routing\Helpers trait类 中的 __call() 方法
public function __call($method, $parameters) { if (method_exists($this->response(), $method) || $method == 'array') { return call_user_func_array([$this->response(), $method], $parameters); } throw new ErrorException('Undefined method '.get_class($this).'::'.$method); } 意为调用 $this->response() 类( Factory类)的 $method (也就是 array() 方法), 并将 $parameters 作为参数 也就是 Factory 类的 array() 方法, 没想到 在 Factory 类中, array() 方法也是通过 __call() 魔术方法调用的&mldr;
另: call_user_func_array() 方法: 调用回调函数，并把一个数组参数作为回调函数的参数
如果调用的方法是一个类方法, 那么用 数组将 类名和方法名 组合起来 [$this->response(), $method] 表示回调方法</div></li><li class=space-y-2><h3><a href=https://zhujianghan.github.io/zjh-blog/posts/backend/_env--getenv/ class="text-lg font-bold">$_ENV-&-getenv()</a></h3><div class="text-sm flex items-center space-x-5"><span class="flex items-center space-x-1"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5A2 2 0 003 7v12a2 2 0 002 2z"/></svg><time>2022-04-16</time></span><ul class="flex items-center space-x-2"><li class="px-1 py-0.5 rounded text-white bg-emerald-500"><a href=https://zhujianghan.github.io/zjh-blog/tags/php>php</a></li></ul></div><div class="line-clamp-3 md:line-clamp-2 text-sm">php 中 $_ENV & getenv() 获取的是环境变量, 如 windows 中 高级系统设置中的环境变量 或 linux 中 export 设置
getenv() 或 $_ENV 获取的是(系统)环境变量, 而不是 .env 文件.
在默认variables_order = "GPCS" 时, laravel 中使用 $_ENV 不能获取到(系统)环境变量, 但是可以获取到 .env 中的变量, 是因为 laravel 在初始化时使用 phpdotenv 将 .env 中的值添加到 $_ENV 中了.
另外 laravel 中 getenv() 本来就可以获取到(系统)环境变量, 也可以获取到 .env 文件中的设置的环境变量, 是因为 laravel(phpdotenv) 用 putenv() 设置了请求期间内有效的环境变量.
ini_set() 配置可修改范围 参考php手册 laravel 初始化 dotenv 参考文章 Laravel ENV—— 环境变量的加载与源码解析</div></li></ul><div class=mt-10><ul class="pagination pagination-default"><li class="page-item disabled"><a aria-disabled=true aria-label=First class=page-link role=button tabindex=-1><span aria-hidden=true>&#171;&#171;</span></a></li><li class="page-item disabled"><a aria-disabled=true aria-label=Previous class=page-link role=button tabindex=-1><span aria-hidden=true>&#171;</span></a></li><li class="page-item active"><a aria-current=page aria-label="Page 1" class=page-link role=button>1</a></li><li class=page-item><a href=/zjh-blog/posts/backend/page/2/ aria-label="Page 2" class=page-link role=button>2</a></li><li class=page-item><a href=/zjh-blog/posts/backend/page/3/ aria-label="Page 3" class=page-link role=button>3</a></li><li class=page-item><a href=/zjh-blog/posts/backend/page/4/ aria-label="Page 4" class=page-link role=button>4</a></li><li class=page-item><a href=/zjh-blog/posts/backend/page/5/ aria-label="Page 5" class=page-link role=button>5</a></li><li class=page-item><a href=/zjh-blog/posts/backend/page/2/ aria-label=Next class=page-link role=button><span aria-hidden=true>&#187;</span></a></li><li class=page-item><a href=/zjh-blog/posts/backend/page/14/ aria-label=Last class=page-link role=button><span aria-hidden=true>&#187;&#187;</span></a></li></ul></div></div><div class="hidden md:block md:w-1/4"><div class="p-4 border-l rounded space-y-10"><div><div class=font-bold>Recent Posts</div><ul class="pl-2 space-y-2"><li><a href=https://zhujianghan.github.io/zjh-blog/posts/server/goaccess-export-nginx-access-log-to-report/ class="text-sm line-clamp-1" title="goaccess export nginx access log to report">goaccess export nginx access log to report</a></li><li><a href=https://zhujianghan.github.io/zjh-blog/posts/frontend/prisma-migrate-after-deployment/ class="text-sm line-clamp-1" title="Prisma Migrate after Deployment">Prisma Migrate after Deployment</a></li><li><a href=https://zhujianghan.github.io/zjh-blog/posts/other/window%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E8%BD%AF%E4%BB%B6/ class="text-sm line-clamp-1" title=Window常用工具软件>Window常用工具软件</a></li><li><a href=https://zhujianghan.github.io/zjh-blog/posts/server/centos%E7%A3%81%E7%9B%98%E6%9F%A5%E7%9C%8B/ class="text-sm line-clamp-1" title=Centos磁盘查看>Centos磁盘查看</a></li><li><a href=https://zhujianghan.github.io/zjh-blog/posts/server/fix-failed-to-verify-certificate-x509/ class="text-sm line-clamp-1" title="Fix Failed to Verify Certificate X509">Fix Failed to Verify Certificate X509</a></li></ul></div><div><div class=font-bold>Tags</div><ul class=pl-2><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/apache/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>apache</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">4</span></a></li><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/benchmark/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>benchmark</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">1</span></a></li><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/c/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>c</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">1</span></a></li><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/canvas/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>canvas</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">1</span></a></li><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/centos/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>centos</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">2</span></a></li><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/channel/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>channel</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">1</span></a></li><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/crontab/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>crontab</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">1</span></a></li><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/docker/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>docker</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">2</span></a></li><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/gin/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>gin</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">1</span></a></li><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/github/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>github</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">1</span></a></li><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/go/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>go</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">26</span></a></li><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/goaccess/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>goaccess</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">1</span></a></li><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/goroutine/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>goroutine</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">1</span></a></li><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/http/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>http</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">1</span></a></li><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/https/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>https</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">1</span></a></li><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/jetbrains/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>jetbrains</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">1</span></a></li><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/jquery/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>jquery</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">1</span></a></li><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/js/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>js</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">2</span></a></li><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/linux/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>linux</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">18</span></a></li><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/mermaid/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>mermaid</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">1</span></a></li><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/mysql/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>mysql</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">9</span></a></li><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/nginx/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>nginx</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">3</span></a></li><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/node/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>node</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">1</span></a></li><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/php/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>php</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">43</span></a></li><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/prisma/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>prisma</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">1</span></a></li><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/react/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>react</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">8</span></a></li><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/server/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>server</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">1</span></a></li><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/ssh/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>ssh</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">1</span></a></li><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/tarojs/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>tarojs</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">1</span></a></li><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/tcp/ip/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>tcp/ip</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">1</span></a></li><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/unit-test/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>unit-test</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">1</span></a></li><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/vmware/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>vmware</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">1</span></a></li><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/vscode/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>vscode</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">1</span></a></li><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/vue/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>vue</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">12</span></a></li><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/yum/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>yum</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">1</span></a></li><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/%E5%9F%9F%E5%90%8D/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>域名</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">3</span></a></li><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/%E5%AE%89%E5%85%A8/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>安全</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">2</span></a></li><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/%E5%BE%AE%E4%BF%A1/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>微信</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">3</span></a></li><li class="inline-block mt-3 mr-2"><a href=https://zhujianghan.github.io/zjh-blog/tags/%E7%AE%97%E6%B3%95/ class="px-2 py-1 rounded bg-slate-200 dark:bg-slate-600"><span class=text-sm>算法</span>
<span class="px-2 text-xs rounded-full text-slate-100 bg-emerald-500">3</span></a></li></ul></div></div></div></div></main><div class="container mx-auto xl:max-w-screen-xl px-2 mt-10 border-t">🍀</div><div x-data="{
    show: document.body.scrollTop > 20 || document.documentElement.scrollTop > 20,
    bglg: '',

    handleScroll(){
      this.show = document.body.scrollTop > 20 || document.documentElement.scrollTop > 20
      if (this.show){
        let rate = document.body.scrollTop !== 0 ? document.body.scrollTop/document.body.scrollHeight : document.documentElement.scrollTop/document.documentElement.scrollHeight
        rate = Math.round(rate * 100)
        this.bglg = `linear-gradient(0deg, #10b981, white ${rate}%, white)`
      } else {
        this.bglg = ''
      }
    },

    backToTop(){
      this.show = false
      document.body.scrollTop = 0
      document.documentElement.scrollTop = 0
    },
  }" @scroll.window=handleScroll @click=backToTop><button class="fixed bottom-10 right-5 p-3 rounded-full shadow-md" :style="{background: bglg}" x-show=show><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentcolor"><path fill-rule="evenodd" d="M4.293 15.707a1 1 0 010-1.414l5-5a1 1 0 011.414.0l5 5a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414.0zm0-6a1 1 0 010-1.414l5-5a1 1 0 011.414.0l5 5a1 1 0 01-1.414 1.414L10 5.414 5.707 9.707a1 1 0 01-1.414.0z" clip-rule="evenodd"/></svg></button></div><script src=https://zhujianghan.github.io/zjh-blog/js/docsearch.js></script>
<script>docsearch({container:'#docsearch',appId:"QB1NYV0GE1",apiKey:"87c867dd34150cbfbee6b6e819fb7c5c",indexName:"hugo-tailwind-blog",placeholder:"搜索",resultsFooterComponent({state:e}){return{type:'span',ref:void 0,constructor:void 0,key:e.query,props:{children:`${e.context.nbHits} hits found!`},__v:null}}})</script></div></body></html>