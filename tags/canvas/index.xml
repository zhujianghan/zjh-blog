<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>canvas on Fourleaf Blog</title><link>https://zhujianghan.github.io/zjh-blog/tags/canvas/</link><description>Recent content in canvas on Fourleaf Blog</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Fri, 10 Nov 2023 09:20:46 +0800</lastBuildDate><atom:link href="https://zhujianghan.github.io/zjh-blog/tags/canvas/index.xml" rel="self" type="application/rss+xml"/><item><title>Line Breaks for Strings on Canvas</title><link>https://zhujianghan.github.io/zjh-blog/posts/frontend/line-breaks-for-strings-on-canvas/</link><pubDate>Fri, 10 Nov 2023 09:20:46 +0800</pubDate><guid>https://zhujianghan.github.io/zjh-blog/posts/frontend/line-breaks-for-strings-on-canvas/</guid><description>canvas 绘制文本时, 换行如何解决 背景 微信小程序中使用 canvas 绘制分享海报长文本不能自动换行
题外: Taro 小程序中 canvas 的宽高设置
// poster.jsx export default () =&amp;gt; { useLoad(() =&amp;gt; { ... const dpr = Taro.getWindowInfo().pixelRatio // canvas对象 通过 createSelectorQuery 获取 canvas.width = renderWidth * dpr canvas.height = renderHeight * dpr ctx.scale(dpr, dpr) ... }) return ( ... &amp;lt;Canvas id=&amp;#39;poster&amp;#39; type=&amp;#39;2d&amp;#39; style=&amp;#39;width:320px;height:400px&amp;#39; /&amp;gt; ... ) } 思路 对于纯中文, 不用考虑单词被分到两行
先将文本按每个 字符 分成数组 按 canvas 的 measureText 方法调整一行的宽度(字体大小不同, 宽度不同), 获取每一行应该出现的文本 分行按高度输出 对于纯英文, 要考虑单词被分到两行</description></item></channel></rss>