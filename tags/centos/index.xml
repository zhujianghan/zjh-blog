<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>centos on Fourleaf Blog</title><link>https://zhujianghan.github.io/zjh-blog/tags/centos/</link><description>Recent content in centos on Fourleaf Blog</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Wed, 15 May 2024 10:39:55 +0800</lastBuildDate><atom:link href="https://zhujianghan.github.io/zjh-blog/tags/centos/index.xml" rel="self" type="application/rss+xml"/><item><title>Centos磁盘查看</title><link>https://zhujianghan.github.io/zjh-blog/posts/server/centos%E7%A3%81%E7%9B%98%E6%9F%A5%E7%9C%8B/</link><pubDate>Wed, 15 May 2024 10:39:55 +0800</pubDate><guid>https://zhujianghan.github.io/zjh-blog/posts/server/centos%E7%A3%81%E7%9B%98%E6%9F%A5%E7%9C%8B/</guid><description>记一次服务器负载过高导致web访问变慢 阿里云监控 在阿里云监控平台发现内存占用 75%以上, cpu在 50%左右,
检查系统负载 uptime, 分别显示一段时间的平均系统负载, 1分钟, 5分钟, 15分钟
检查内存 free -h
检查 cpu 服务器查看 top 都卡, 后查看 pm2, 发现一个实例就占用了 1G+内存, pm2 reload 1 实现重启, 内存占用到 200M
ps: ssh界面 如果宽度不够长, pm2 ls 只会显示部分列, 要查看更多(如 uptime 等), 需拉长或全屏终端.
检查磁盘 df -h 查看总占用 cd / &amp;amp;&amp;amp; du -ah &amp;ndash;max-depth=1 | sort -rh 查看根目录下文件夹占用 进去某个文件夹, du -ah &amp;ndash;max-depth=1 | sort -rh 查看文件夹占用 nginx access.log 过大, echo -n '' &amp;gt; access.log 清空文件</description></item><item><title>Upgrade Nodejs by Yum on Centos</title><link>https://zhujianghan.github.io/zjh-blog/posts/server/upgrade-nodejs-by-yum-on-centos/</link><pubDate>Tue, 20 Jun 2023 09:51:24 +0800</pubDate><guid>https://zhujianghan.github.io/zjh-blog/posts/server/upgrade-nodejs-by-yum-on-centos/</guid><description>centos7.9 yum 升级 nodejs(14-&amp;gt;16) 步骤 首先确定当前 nodejs 是由 yum 安装的 $ yum list installed | grep nodejs # nodejs.x86_64 2:12.22.12-1nodesource @nodesource 删除当前 nodejs 版本 (https://github.com/nodesource/distributions) yum remove nodejs rm -r /etc/yum.repos.d/nodesource*.repo yum clean all 添加 nodejs16 源 $ curl -fsSL https://rpm.nodesource.com/setup_16.x | sudo bash - 安装 nodejs $ sudo yum install -y nodejs $ node -v $ npm -v</description></item></channel></rss>